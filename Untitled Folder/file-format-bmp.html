<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xml:lang="en">
<head>
<title>file-format-bmp</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta http-equiv="content-language" content="en" />
<link href="/img/printv1.css" rel="stylesheet" type="text/css" media="print"/>
<link href="/img/screenv2.css" rel="stylesheet" type="text/css" media="screen"/>

<script type="text/javascript">
var dy;
var timer;

function dopull() {
  dy+=10;
  document.getElementById('flagmenu').style.height=dy+'px';
  if (dy>170) {
    clearInterval(timer);
  }
}

function flagpulldown () {
  dy=22;
  document.getElementById('flagshow').style.visibility='hidden';
  document.getElementById('flagmenu').style.visibility='visible';
  timer=window.setInterval("dopull()",30);
}

function togglesearch () {
  document.getElementById('advsearch').style.visibility='visible';
}
</script>
</head>

<body>

<div class='topdiv'>
  <div class='topright'>
  
  
  <div id="flagshow" class='flagshow' >
  <div id="flagmenu" class='flagmenu' >
    <a href="/de/produkte"><img src="/img/flagde.gif" class="flag" alt="deutsch" width="19" height="13"/>deutsch</a>
    <a href="/en/products"><img src="/img/flagen.gif" class="flag" alt="english" width="19" height="13"/>english</a>
  </div><a href='javascript:flagpulldown()'>  <img src="/img/flagen.gif" width="19" height="13" class="flag" alt="english"/>english</a>  </div>

    </div>


  
  <a href="/en/company"><img src="/img/logo.jpg" alt="Daub Logo" width="216" height="70"/></a>
</div>


<div class="topmenu">
  <a class='active'  href='/en/products'>Products</a>
  <a  href='/en/downloads'>Downloads</a>
  <a  href='/en/shop'>Buy</a>
  <a  href='/en/company'>Company</a>
  <a   href='/en/board/viewforum.php?f=3'>Community</a> 
  <a   href='/en/board/ucp.php'>my Daubnet</a>
  <div class='topsearch'>
     <form action="board/search.php" method="post" id="search">
				<fieldset>
					<div style="position:absolute; z-index:1; visibility:hidden;" id="advsearch">
					  <div style="position:relative; left:0px; top: 20px; background-color:#999; ">
					    <a class="searchmenu" href="board/search.php" title="View the advanced search options">Advanced search</a>
			          </div>
					</div>
				  <div style="background-color:#fff; vertical-align:top;"><input class="search-inputbox" type="text"  name="keywords" id="keywords" maxlength="128" title="Search…" value="Search…" onclick="if(this.value=='Search…')this.value='';" onblur="if(this.value=='')this.value='Search…';" /><input class="search-button"   type="image" src="/img/search.gif" value="Suche" /><img class="search-dropbutton" src="/img/dropdownarrow.gif" alt="weitere Suchoptionen" onclick="togglesearch()" /></div>
				</fieldset>
	 </form>  
  </div> 
</div>

<div class='wikiframe'><div class='wikititle'><h1 class='wiki'></h1></div><div class='wikicontent'><div class='topnav'><h1 class='wiki'>  <img   class='wiki' style='float:left;' src='/img/en/products.png' alt='' width='115'  height='136' />Products</h1><table class='wiki ' ><tr class='wiki'><td colspan='2'>  Business Software: </td><td >&nbsp;</td><td >  Home and Family: </td></tr><tr class='wiki'><td colspan='2'>   <a  href="/en/load"> Load! - Container Optimization</a>  </td><td >&nbsp;</td><td >   <a  href="/en/ages"> Ages! - Family Tree Software</a>  </td></tr></table>&nbsp;<br/><h1 class='wiki'>  File Format Specification  <a  href="/en/file-formats"> Index</a> </h1>&nbsp;<br/></div><br style='clear:both;'/><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Basic Description</h1> This file format is the MS-Windows standard format. It holds black&white-, 16-color, 256-color and Truecolor images. The palletized 16-color and 256-color images may be compressed via run length encoding. Notice there is also a OS/2-BMP format. <br/><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Basic File Format</h1><table class='wiki borders' ><tr class='wiki'><th colspan='4'>  Name </th><th >  Size </th><th >  Description </th></tr><tr class='wiki'><td colspan='4'>  Header </td><td >  14 bytes </td><td >  Windows Structure: BITMAPFILEHEADER  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  Signature </td><td >  2 bytes </td><td >  'BM'  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  FileSize </td><td >  4 bytes </td><td >  File size in bytes  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  reserved </td><td >  4 bytes </td><td >  unused (=0)  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  DataOffset </td><td >  4 bytes </td><td >  File offset to Raster Data  </td></tr><tr class='wiki'><td colspan='4'>  InfoHeader </td><td >  40 bytes </td><td >  Windows Structure: BITMAPINFOHEADER  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>    Size </td><td >  4 bytes </td><td >  Size of InfoHeader =40   </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  Width </td><td >  4 bytes </td><td >  Bitmap Width  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  Height </td><td >  4 bytes </td><td >  Bitmap Height  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  Planes </td><td >  2 bytes </td><td >  Number of Planes (=1)  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  BitCount </td><td >  2 bytes </td><td >  Bits per Pixel  <br/>1 = monochrome palette. NumColors = 2   <br/>4 = 4bit palletized. NumColors = 16    <br/>8 = 8bit palletized. NumColors = 256   <br/>16 = 16bit RGB. NumColors = 65536 (?)  <br/>24 = 24bit RGB. NumColors = 16M  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  Compression </td><td >  4 bytes </td><td >  Type of Compression   <br/>0 = BI_RGB   no compression <br/>1 = BI_RLE8 8bit RLE encoding <br/>2 = BI_RLE4 4bit RLE encoding  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  ImageSize </td><td >  4 bytes </td><td >  (compressed) Size of Image   </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='4'>  It is valid to set this =0 if Compression = 0  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  XpixelsPerM </td><td >  4 bytes </td><td >  horizontal resolution: Pixels/meter  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  YpixelsPerM </td><td >  4 bytes </td><td >  vertical resolution: Pixels/meter  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  ColorsUsed </td><td >  4 bytes </td><td >  Number of actually used colors  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  ColorsImportant </td><td >  4 bytes </td><td >  Number of important colors  0 = all  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='2'>  ColorTable </td><td >  4 * NumColors bytes </td><td >  present only if Info.BitsPerPixel <= 8    </td></tr><tr class='wiki'><td colspan='6'>  colors should be ordered by importance  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td >&nbsp;</td><td >  Red </td><td >  1 byte </td><td >  Red intensity  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td >&nbsp;</td><td >  Green </td><td >  1 byte </td><td > Green intensity  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td >&nbsp;</td><td >  Blue </td><td >  1 byte </td><td >  Blue intensity  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td >&nbsp;</td><td >  reserved </td><td >  1 byte </td><td >  unused (=0)  </td></tr><tr class='wiki'><td colspan='2'>&nbsp;</td><td colspan='4'> repeated NumColors times  </td></tr><tr class='wiki'><td colspan='4'>  Raster Data </td><td >  Info.ImageSize bytes </td><td >  The pixel data  </td></tr></table>&nbsp;<br/><h2 class='wiki'>  Raster Data encoding</h2> Depending on the image's BitCount and on the Compression flag there are 6 different encoding schemes. All of them share the following:  <br/> Pixels are stored bottom-up, left-to-right. Pixel lines are padded with zeros to end on a 32bit (4byte) boundary. For uncompressed formats every line will have the same number of bytes. Color indices are zero based, meaning a pixel color of 0 represents the first color table entry, a pixel color of 255 (if there are that many) represents the 256th entry. For images with more than 256 colors there is no color table. <br/>&nbsp;<br/><h2 class='wiki'>  Raster Data encoding for 1bit / black & white images</h2> BitCount = 1 Compression = 0  <br/> Every byte holds 8 pixels, its highest order bit representing the leftmost pixel of those. There are 2 color table entries. Some readers will ignore them though, and assume that 0 is black and 1 is white. If you are storing black and white pictures you should stick to this, with any other 2 colors this is not an issue. Remember padding with zeros up to a 32bit boundary (This can be up to 31 zeros/pixels!)  <br/>&nbsp;<br/><h2 class='wiki'>  Raster Data encoding for 4bit / 16 color images</h2> BitCount = 4 Compression = 0  <br/> Every byte holds 2 pixels, its high order 4 bits representing the left of those. There are 16 color table entries. These colors do not have to be the 16 MS-Windows standard colors. Padding each line with zeros up to a 32bit boundary will result in up to 28 zeros = 7 'wasted pixels'. <br/>&nbsp;<br/><h2 class='wiki'>  Raster Data encoding for 8bit / 256 color images</h2> BitCount = 8 Compression = 0  <br/> Every byte holds 1 pixel. There are 256 color table entries. Padding each line with zeros up to a 32bit boundary will result in up to 3 bytes of zeros = 3 'wasted pixels'. <br/>&nbsp;<br/><h2 class='wiki'>  Raster Data encoding for 16bit / hicolor images</h2> BitCount = 16 Compression = 0  <br/> Every 2bytes / 16bit holds 1 pixel.   <br/> <information missing: the 16 bit was introduced together with Video For Windows? Is it a memory-only-format?>  <br/>&nbsp;<br/> The pixels are no color table pointers. There are no color table entries. Padding each line with zeros up to a 16bit boundary will result in up to 2 zero bytes. <br/>&nbsp;<br/><h2 class='wiki'>  Raster Data encoding for 24bit / truecolor images</h2> BitCount = 24 Compression = 0  <br/> Every 4bytes / 32bit holds 1 pixel. The first holds its red, the second its green, and the third its blue intensity. The fourth byte is reserved and should be zero. There are no color table entries. The pixels are no color table pointers. No zero padding necessary. <br/>&nbsp;<br/><h2 class='wiki'>  Raster Data compression for 4bit / 16 color images</h2> BitCount = 4 Compression = 2  <br/> The pixel data is stored in 2bytes / 16bit chunks.  The first of these specifies the number of consecutive pixels with the same pair of color. The second byte defines two color indices. The resulting pixel pattern will be interleaved high-order 4bits and low order 4 bits (ABABA...). If the first byte is zero, the second defines an escape code. The End-of-Bitmap is zero padded to end on a 32bit boundary. Due to the 16bit-ness of this structure this will always be either two zero bytes or none.   <br/><table class='wiki borders' ><tr class='wiki'><th colspan='2'>  n (byte 1) </th><th >  c (Byte 2) </th><th >  Description </th></tr><tr class='wiki'><td colspan='2'>  >0 </td><td >  any </td><td >  n pixels are to be drawn. The 1st, 3rd, 5th, ... pixels' color is in c's high-order 4 bits, the even pixels' color is in c's low-order 4 bits. If both color indices are the same, it results in just n pixels of color c </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  0 </td><td >  End-of-line </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  1 </td><td >  End-of-Bitmap </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  2 </td><td >  Delta. The following 2 bytes define an unsigned offset in x and y direction (y being up) The skipped pixels should get a color zero. </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  >=3 </td><td >  The following c bytes will be read as single pixel colors just as in uncompressed files. up to 12 bits of zeros follow, to put the file/memory pointer on a 16bit boundary again. </td></tr></table>&nbsp;<br/><h2 class='wiki'>  Example for 4bit RLE </h2><table class='wiki borders' ><tr class='wiki'><th colspan='2'>  Compressed Data </th><th >  Expanded data </th></tr><tr class='wiki'><td colspan='2'>  03 04 </td><td >  0 4 0 </td></tr><tr class='wiki'><td colspan='2'>  05 06 </td><td >  0 6 0 6 0</td></tr><tr class='wiki'><td colspan='2'>  00 06 45 56 67 00 </td><td >  4 5 5 6 6 7 </td></tr><tr class='wiki'><td colspan='2'>  04 78 </td><td >  7 8 7 8 </td></tr><tr class='wiki'><td colspan='2'>  00 02 05 01 </td><td >  Move 5 right and 1 up. (Windows docs say down, which is wrong) </td></tr><tr class='wiki'><td colspan='2'>  00 00 </td><td >  End-of-line </td></tr><tr class='wiki'><td colspan='2'>  09 1E </td><td >  1 E 1 E 1 E 1 E 1 </td></tr><tr class='wiki'><td colspan='2'>  00 01 </td><td >  EndofBitmap </td></tr><tr class='wiki'><td colspan='2'>  00 00 </td><td >  Zero padding for 32bit boundary </td></tr></table>&nbsp;<br/><h2 class='wiki'>  Raster Data compression for 8bit / 256 color images</h2> BitCount = 8 Compression = 1  <br/> The pixel data is stored in 2bytes / 16bit chunks.  The first of these specifies the number of consecutive pixels with the same color. The second byte defines their color index. If the first byte is zero, the second defines an escape code. The End-of-Bitmap is zero padded to end on a 32bit boundary. Due to the 16bit-ness of this structure this will always be either two zero bytes or none.   <br/><table class='wiki borders' ><tr class='wiki'><th colspan='2'>   n (byte 1) </th><th >  c (Byte 2) </th><th >  Description </th></tr><tr class='wiki'><td colspan='2'>  >0 </td><td >  any </td><td >  n pixels of color number c </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  0 </td><td >  End-of-line </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  1 </td><td >  EndOfBitmap </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  2 </td><td >  Delta. The following 2 bytes define an unsigned offset in x and y direction (y being up) The skipped pixels should get a color zero. </td></tr><tr class='wiki'><td colspan='2'>  0 </td><td >  >=3 </td><td >  The following c bytes will be read as single pixel colors just as in uncompressed files. A zero follows, if c is odd, putting the file/memory pointer on a 16bit boundary again. </td></tr></table>&nbsp;<br/><h2 class='wiki'>  Example for 8bit RLE </h2><table class='wiki borders' ><tr class='wiki'><th colspan='2'>  Compressed Data </th><th >  Expanded data </th></tr><tr class='wiki'><td colspan='2'>  03 04 </td><td >  04 04 04 </td></tr><tr class='wiki'><td colspan='2'>  05 06 </td><td >  06 06 06 06 06 </td></tr><tr class='wiki'><td colspan='2'>  00 03 45 56 67 00 </td><td >  45 56 67 </td></tr><tr class='wiki'><td colspan='2'>  02 78 </td><td >  78 78 </td></tr><tr class='wiki'><td colspan='2'>  00 02 05 01 </td><td >  Move 5 right and 1 up. (Windows docs say down, which is wrong) </td></tr><tr class='wiki'><td colspan='2'>  00 00 </td><td >  End-of-line </td></tr><tr class='wiki'><td colspan='2'>  09 1E </td><td >  1E 1E 1E 1E 1E 1E 1E 1E 1E </td></tr><tr class='wiki'><td colspan='2'>  00 01 </td><td >  End-of-bitmap </td></tr><tr class='wiki'><td colspan='2'>  00 00 </td><td >  Zero padding for 32bit boundary </td></tr></table><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Portability</h1> Although BMPs were invented by Microsoft for its Windows platform, a lot of programs on other platforms are capable of reading and writing them. Notice the Intel order in 2byte and 4-byte integer values (Least significant byte first). The 16bit BMPs have been introduced to Windows after the others, still puzzling many applications. <br/><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Trademarks, Patents and Royalties</h1> To my knowledge: None.  <br/> (please read the disclaimer)  <br/><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Cross-Checking Software</h1> This section is for programmers, who wish to cross-check their implementation with others. This is an incomplete list of programs, which are available as freeware / shareware / try-before-buy etc.  <br/> The following software is able to decode BMPs:  <br/>&nbsp;<br/> easiest: Make the file the MS-Windows' background. <br/> MS-Paint / Paintbrush <br/> JASC Paint Shop Pro <br/> The following software is able to encode BMPs  <br/> JASC Paint Shop Pro <br/> MS-Paint / Paintbrush <br/><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Online Resources</h1>  <a  href="http://www.dcs.ed.ac.uk/~mxr/gfx/">http://www.dcs.ed.ac.uk/~mxr/gfx/</a> <br/>  <a  href="http://www.r2m.com/windev/">http://www.r2m.com/windev/</a>   Internet Resources for Windows Developers <br/><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Paper Resources</h1> MS-Windows SDK <br/>&nbsp;<br/> [German:] Referenzhandbuch Dateiformate by Günter Born.  <br/>&nbsp;<br/> the following suggestions are from the Graphics Fileformats FAQ: <br/>&nbsp;<br/> Inside Windows File Formats, Tom Swan, Sams Publishing 1993.<br/> ISBN 0-672-30338-8 $24.95 softcover, 337 pages and 1 disk (3.5 in.).<br/> Order: Sams Publishing, 2201 West 103rd Street, Indianapolis, IN 46290  <br/> Luse, Marv. "The BMP File Format," Dr. Dobb's Journal, #219 September<br/> 1994 (Vol 9, Issue 10), pp. 18-22.<br/> code available at:  <a  href="ftp://ftp.mv.com/pub/ddj/1994/1994.09/bmp.zip">ftp://ftp.mv.com/pub/ddj/1994/1994.09/bmp.zip</a> <br/> The BMP File Format: Part I+II, Dr. Dobb's Journal, David Charlap, #228+#229<br/> March+April 1995 (Vol. 20, Issue 3+4).<br/> code available at:  <a  href="ftp://ftp.mv.com/pub/ddj/1995/1995.03/bmp.zip">ftp://ftp.mv.com/pub/ddj/1995/1995.03/bmp.zip</a> <br/><div class="clear">&nbsp;</div></div></div><div class="bottomns"><span class="bottomspan">&nbsp;</span></div></div><div class="whitebox" style="width:85%"><div class="top"><span class="topspan">&nbsp;</span></div><div class="middle"><div class="content"><h1 class='wiki'>  Disclaimer   </h1> This is not the official format documentation. Although we're doing our best to keep this information as accurate as possible, there is no way of checking all of it under all possible circumstances. We're not taking any responsibility for the results of these information or lack thereof. The 'trademarks, patents and royalties' section is here just for your convenience, and is in no way complete. Please send us a note, if you find any incorrect of missing information.   <br/><div class="clear">&nbsp;</div></div></div><div class="bottom"><span class="bottomspan">&nbsp;</span></div></div></div></div><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1894585-3");
pageTracker._trackPageview();
</script>
</body>
</html>
